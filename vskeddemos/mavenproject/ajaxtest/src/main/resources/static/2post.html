<!DOCTYPE HTML>
<html lang="zh">

<head>
  <!-- must set here! -->
  <base href="">

  <title>post请求</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
</head>

<body>
测试参考：L:\git\vskeddemolist\vskeddemos\mavenproject\ajaxtest

  <div id="testdiv"></div>


  <script>
"use strict"

class PostTest{
  test1(){
    const url = "http://localhost:8181/post1";
    //res.text(); or res.json();
    fetch(url,{
      method:"POST",
      mode:"cors",
      headers: {
        //"Content-Type": "application/json"
        "Content-Type": "application/x-www-form-urlencoded"
      },
    }).then(res=>res.text()).then(res=>{
      console.log(res);
      console.log("----------------------1");
    });
  }

  test2(){
    const url = "http://localhost:8181/post2";
    //res.text(); or res.json();
    fetch(url,{
      method:"POST",
      body:"id=9911&name=godIsGirl", //数据
      mode:"cors",
      headers: {
        //"Content-Type": "application/json"
        "Content-Type": "application/x-www-form-urlencoded"
      }
    }).then(res=>res.text()).then(res=>{
      console.log(res);
      console.log("----------------------2");
    });
  }

}

const myPostTest=new PostTest();
myPostTest.test1();
myPostTest.test2();


/*

同步调用示例，第一个文件里声明同步方法
"use strict"

class User{
    async login(accountName,accountPass){
        const url = "/w/authentication";
        const data = await fetch(url, {
            method: "POST",
            body: "accountName=" + accountName + "&accountPassword=" + accountPass, //数据
            mode: "cors",
            headers: {
                //"Content-Type": "application/json"
                "Content-Type": "application/x-www-form-urlencoded"
            }
        });

        return data.json();
    }

}

第二个文件里调用
"use strict"

class login{
    userLogin(){
        console.log("----用户登录-----");
        const user=new User();
        const accountName=document.getElementById("accountName").value;
        const accountPass=document.getElementById("accountPass").value;
        //这里调用的
        user.login(accountName, accountPass).then(function(res){
            if(res.code=="0000"){
                console.log(res.data);
            }else{
                alert(res.msg);
            }
        });
    }

    cleanLoginInfo(){
        document.getElementById("accountName").value="";
        document.getElementById("accountPass").value="";
        document.getElementById("accountName").focus();
        console.log("----重置完成-----");
    }

    initUI(){
        document.getElementById("loginBt").onclick=this.userLogin;
        document.getElementById("resetBt").onclick=this.cleanLoginInfo;
        document.getElementById("accountName").focus();
        console.log("-------------初始化界面完成----");
    }
}

const loginPage=new login();
loginPage.initUI();



*/

  </script>

</body>

</html>